<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIMhi Youth Chatbot - AI Mode</title>
    <link rel="stylesheet" href="chatbot.css">
</head>
<body>
    <div class="chatbot-wrapper">
        <div class="chatbot-container">
        <div class="chat-header">
            <h1>AIMhi Youth Support</h1>
            <p>AI-Powered Support (Gemini)</p>
            <div class="mode-selector">
                <label for="chatMode">Chat Mode:</label>
                <select id="chatMode" onchange="handleModeChange(this.value)">
                    <option value="rule-based">Rule-Based</option>
                    <option value="llm" selected>AI (Gemini)</option>
                </select>
            </div>
            <button class="clear-api-key-btn" onclick="clearApiKey()" title="Clear API Key">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
            </button>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message bot">
                <div class="message-bubble">
                    Hello! I'm an AI assistant powered by Gemini, here to support you. How are you feeling today?
                </div>
            </div>
        </div>
        
        <div class="api-disclaimer">
            <p><strong>⚠️ API Limits:</strong> Using Gemini 2.0 Flash (Free Tier)</p>
            <p>• 15 requests/min • 1M tokens/min • 200 requests/day</p>
            <p>Exceeded limits? Clear API key with trash icon above.</p>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <div class="chat-input-container">
            <form class="chat-input-form" id="chatForm">
                <input 
                    type="text" 
                    class="chat-input" 
                    id="chatInput" 
                    placeholder="Type your message..."
                    autocomplete="off"
                >
                <button type="submit" class="send-button">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                    </svg>
                </button>
            </form>
        </div>
        
        <div class="api-key-container" id="apiKeyContainer" style="display: none;">
            <div class="api-key-prompt">
                <h3>Gemini API Key Required</h3>
                <p>Please enter your Gemini API key to use AI mode:</p>
                <input type="password" id="apiKeyInput" placeholder="Enter your API key">
                <button onclick="saveApiKey()">Save Key</button>
                <p class="api-key-note">Get your free API key from <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></p>
            </div>
        </div>
    </div>
    </div>

    <script src="chatbot-llm.js"></script>
</body>
</html>